# Instructions for cleaning and rebuilding everything. This may become a target
# in the Makefile, someday ;)

# Go to the source.

cd $JASL_BASE/source

# Clean everything.

(cd cni-wrapper;make clean_hdr clean_libs)
(cd org;make clean clean_jar clean_hdr clean_libs)
make clean_all
(cd jasl;make clean_hdr clean_libs)
(cd cni-wrapper/jasl;make clean_hdr clean_libs)
(cd swig;make clean_all)
(cd scenarios;make clean)

# Build the libraries and install the header files.

(cd cni-wrapper;make libs hdr)
(cd org;make jar libs hdr)
(cd jasl;make libs hdr)
(cd cni-wrapper/jasl;make libs hdr)

# Build the wrapper libraries. Note that the Makefile may require editing to set
# the correct path(s) for the Perl and/or Python headers.

make clean_all
(cd swig;make libs)

# Build all the executables and install the scenarios.

make build_all

# Install the scripts. Note that the installed version of Driver.py may require
# editing to set the correct system path.

make perl python

# Test everything.

make test_jar
make test
make test_gcj
make test_gcj_dynamic
make test_gcj_static
make test_cpp_dynamic
make test_cpp_static
make test_cxx_dynamic
make test_cxx_static
make test_c_dynamic
make test_c_static
make test_perl
make test_python

# Build all of the documentation. This requires a network connection for
# javadoc to work correctly.

make -k all_docs

# Update the ctags file.

make ctags
